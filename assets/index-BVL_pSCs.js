import{d as T,r as p,o as B,c as D,a as t,w as a,b as l,M as i,g as r,t as _,j as v,l as C,f as I,h as $,I as O,u as q,e as g,_ as L}from"./index-CX8KaRsY.js";const P={class:"orders-container"},R=T({__name:"index",setup(j){const k=q(),f=p([]),u=p(!1),c=p({total:0,current:1,pageSize:10}),d=async(o=1)=>{u.value=!0;try{f.value=[{id:"ORD20240101001",showName:"2024年春节音乐会",sessionName:"场次1",ticketTierName:"VIP座",quantity:2,totalAmount:580,status:"pending",createdAt:"2024-01-01 10:00:00"}],c.value.total=1}catch{i.error("获取订单列表失败")}finally{u.value=!1}},h=o=>new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),N=o=>({pending:"orange",confirmed:"green",cancelled:"red"})[o],w=o=>({pending:"待确认",confirmed:"已确认",cancelled:"已取消"})[o],b=o=>{k.push(`/orders/${o.id}`)},M=async o=>{try{i.success("订单确认成功"),await d(c.value.current)}catch{i.error("订单确认失败")}},A=async o=>{try{i.success("订单取消成功"),await d(c.value.current)}catch{i.error("订单取消失败")}};return B(()=>{d()}),(o,e)=>{const x=l("a-space"),s=l("a-table-column"),V=l("a-tag"),m=l("a-button"),z=l("a-table"),S=l("a-card");return g(),D("div",P,[t(S,{class:"orders-card"},{title:a(()=>[t(x,null,{default:a(()=>[t($(O)),e[0]||(e[0]=I("span",null,"订单列表",-1))]),_:1})]),default:a(()=>[t(z,{data:f.value,loading:u.value,pagination:c.value,onPageChange:d},{columns:a(()=>[t(s,{title:"订单编号","data-index":"id"}),t(s,{title:"演出名称","data-index":"showName"}),t(s,{title:"场次","data-index":"sessionName"}),t(s,{title:"票档","data-index":"ticketTierName"}),t(s,{title:"数量","data-index":"quantity"}),t(s,{title:"总价","data-index":"totalAmount"},{cell:a(({record:n})=>[r(" ¥"+_(n.totalAmount),1)]),_:1}),t(s,{title:"状态","data-index":"status"},{cell:a(({record:n})=>[t(V,{color:N(n.status)},{default:a(()=>[r(_(w(n.status)),1)]),_:2},1032,["color"])]),_:1}),t(s,{title:"下单时间","data-index":"createdAt"},{cell:a(({record:n})=>[r(_(h(n.createdAt)),1)]),_:1}),t(s,{title:"操作",fixed:"right",width:120},{cell:a(({record:n})=>[t(x,null,{default:a(()=>[t(m,{type:"text",size:"small",onClick:y=>b(n)},{default:a(()=>e[1]||(e[1]=[r("查看")])),_:2},1032,["onClick"]),n.status==="pending"?(g(),v(m,{key:0,type:"text",size:"small",status:"success",onClick:y=>M(n)},{default:a(()=>e[2]||(e[2]=[r("确认")])),_:2},1032,["onClick"])):C("",!0),n.status==="pending"?(g(),v(m,{key:1,type:"text",size:"small",status:"danger",onClick:y=>A(n)},{default:a(()=>e[3]||(e[3]=[r("取消")])),_:2},1032,["onClick"])):C("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","loading","pagination"])]),_:1})])}}}),F=L(R,[["__scopeId","data-v-18a0c5e7"]]);export{F as default};
