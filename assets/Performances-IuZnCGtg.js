import{d as R,r as $,g as D,h as O,c as U,a as e,w as a,b as n,e as s,u as d,f as z,t as x,o as F,_ as A}from"./index-BS8JmWLW.js";import{P as B}from"./constants-YvDzxIri.js";import{f as M,g as L,a as Q}from"./localStorage-5GgEftBe.js";const h={class:"performances"},j=R({__name:"Performances",setup(q){const _=z(),v=$([]),l=D({title:"",venue:"",status:""}),C=r=>{if(!r)return 0;const t=L(r);let m=0;return t.forEach(p=>{Q(r,p.id).forEach(g=>{m+=g.totalQuantity||0})}),m},V=[{title:"演出ID",dataIndex:"id",width:100},{title:"演出标题",dataIndex:"title"},{title:"场馆",dataIndex:"venue"},{title:"总票数",width:100,slotName:"totalTickets"},{title:"状态",dataIndex:"status",slotName:"status"},{title:"操作",slotName:"actions"}],k=B,f=()=>{v.value=M(l)},T=()=>{f()},P=()=>{l.title="",l.venue="",l.status="",f()};return O(()=>{f()}),(r,t)=>{const m=n("a-typography-title"),p=n("a-input"),i=n("a-form-item"),g=n("a-select"),u=n("a-button"),y=n("a-space"),w=n("a-form"),b=n("a-card"),N=n("icon-plus"),S=n("a-tag"),E=n("a-table");return F(),U("div",h,[e(m,{heading:3,style:{"margin-top":"0px","margin-bottom":"24px"}},{default:a(()=>t[4]||(t[4]=[s("演出管理")])),_:1}),e(b,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(w,{model:l,layout:"inline"},{default:a(()=>[e(i,{field:"title",label:"演出标题"},{default:a(()=>[e(p,{modelValue:l.title,"onUpdate:modelValue":t[0]||(t[0]=o=>l.title=o),placeholder:"请输入演出标题","allow-clear":""},null,8,["modelValue"])]),_:1}),e(i,{field:"venue",label:"场馆"},{default:a(()=>[e(p,{modelValue:l.venue,"onUpdate:modelValue":t[1]||(t[1]=o=>l.venue=o),placeholder:"请输入场馆名称","allow-clear":""},null,8,["modelValue"])]),_:1}),e(i,{field:"status",label:"状态"},{default:a(()=>[e(g,{modelValue:l.status,"onUpdate:modelValue":t[2]||(t[2]=o=>l.status=o),options:d(k),placeholder:"请选择状态","allow-clear":""},null,8,["modelValue","options"])]),_:1}),e(i,null,{default:a(()=>[e(y,null,{default:a(()=>[e(u,{type:"primary",onClick:T},{default:a(()=>t[5]||(t[5]=[s("搜索")])),_:1}),e(u,{onClick:P},{default:a(()=>t[6]||(t[6]=[s("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(b,null,{title:a(()=>[e(y,null,{default:a(()=>[e(u,{type:"primary",onClick:t[3]||(t[3]=o=>d(_).push("/performances/create"))},{icon:a(()=>[e(N)]),default:a(()=>[t[7]||(t[7]=s(" 新建演出 "))]),_:1})]),_:1})]),default:a(()=>[e(E,{columns:V,data:v.value,pagination:{pageSize:10}},{totalTickets:a(({record:o})=>[s(x(C(o.id)),1)]),status:a(({record:o})=>[e(S,{color:{on_sale:"green",coming_soon:"blue",sold_out:"red"}[o.status]},{default:a(()=>{var c;return[s(x((c=d(k).find(I=>I.value===o.status))==null?void 0:c.label),1)]}),_:2},1032,["color"])]),actions:a(({record:o})=>[e(u,{type:"text",size:"small",onClick:c=>d(_).push(`/performances/${o.id}/edit`)},{default:a(()=>t[8]||(t[8]=[s("编辑")])),_:2},1032,["onClick"]),e(u,{type:"text",size:"small",onClick:c=>d(_).push(`/performances/${o.id}/sessions`)},{default:a(()=>t[9]||(t[9]=[s("场次管理")])),_:2},1032,["onClick"])]),_:1},8,["data"])]),_:1})])}}}),K=A(j,[["__scopeId","data-v-d9aa3d6b"]]);export{K as default};
